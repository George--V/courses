<!DOCTYPE html>
<html>
<head>
  <title>The caret package</title>
  <meta charset="utf-8">
  <meta name="description" content="The caret package">
  <meta name="author" content="Jeffrey Leek">
  <meta name="generator" content="slidify" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <link rel="stylesheet" href="../../librariesNew/frameworks/io2012/css/default.css" media="all" >
  <link rel="stylesheet" href="../../librariesNew/frameworks/io2012/css/phone.css" 
    media="only screen and (max-device-width: 480px)" >
  <link rel="stylesheet" href="../../librariesNew/frameworks/io2012/css/slidify.css" >
  <link rel="stylesheet" href="../../librariesNew/highlighters/highlight.js/css/tomorrow.css" />
  <base target="_blank"> <!-- This amazingness opens all links in a new tab. -->  
  
  <!-- Grab CDN jQuery, fall back to local if offline -->
  <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../librariesNew/widgets/quiz/js/jquery.js"><\/script>')</script> 
  <script data-main="../../librariesNew/frameworks/io2012/js/slides" 
    src="../../librariesNew/frameworks/io2012/js/require-1.0.8.min.js">
  </script>
  
  

</head>
<body style="opacity: 0">
  <slides class="layout-widescreen">
    
    <!-- LOGO SLIDE -->
        <slide class="title-slide segue nobackground">
  <aside class="gdbar">
    <img src="../../assets/img/bloomberg_shield.png">
  </aside>
  <hgroup class="auto-fadein">
    <h1>The caret package</h1>
    <h2></h2>
    <p>Jeffrey Leek<br/>Johns Hopkins Bloomberg School of Public Health</p>
  </hgroup>
  <article></article>  
</slide>
    

    <!-- SLIDES -->
    <slide class="" id="slide-1" style="background:;">
  <hgroup>
    <h2>The caret R package</h2>
  </hgroup>
  <article data-timings="">
    <p><img class=center src=../../assets/img/08_PredictionAndMachineLearning/caret.png height=400></p>

<p><a href="http://caret.r-forge.r-project.org/">http://caret.r-forge.r-project.org/</a></p>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-2" style="background:;">
  <hgroup>
    <h2>Caret functionality</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li>Some preprocessing (cleaning)

<ul>
<li>preProcess</li>
</ul></li>
<li>Data splitting

<ul>
<li>createDataPartition</li>
<li>createResample</li>
<li>createTimeSlices</li>
</ul></li>
<li>Training/testing functions

<ul>
<li>train</li>
<li>predict</li>
</ul></li>
<li>Model comparison

<ul>
<li>confusionMatrix</li>
</ul></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-3" style="background:;">
  <hgroup>
    <h2>Machine learning algorithms in R</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li>Linear discriminant analysis</li>
<li>Regression</li>
<li>Naive Bayes</li>
<li>Support vector machines</li>
<li>Classification and regression trees</li>
<li>Random forests</li>
<li>Boosting</li>
<li>etc. </li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-4" style="background:;">
  <hgroup>
    <h2>Why caret?</h2>
  </hgroup>
  <article data-timings="">
    <p><img class=center src=../../assets/img/08_PredictionAndMachineLearning/predicttable.png height=250></p>

<p><a href="http://www.edii.uclm.es/%7EuseR-2013/Tutorials/kuhn/user_caret_2up.pdf">http://www.edii.uclm.es/~useR-2013/Tutorials/kuhn/user_caret_2up.pdf</a></p>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-5" style="background:;">
  <hgroup>
    <h2>SPAM Example: Data splitting</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="r">library(caret); library(kernlab); data(spam)
inTrain &lt;- createDataPartition(y=spam$type,
                              p=0.75, list=FALSE)
training &lt;- spam[inTrain,]
testing &lt;- spam[-inTrain,]
dim(training)
</code></pre>

<pre><code>[1] 3451   58
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-6" style="background:;">
  <hgroup>
    <h2>SPAM Example: Fit a model</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="r">set.seed(32343)
modelFit &lt;- train(type ~.,data=training, method=&quot;glm&quot;)
modelFit
</code></pre>

<pre><code>Generalized Linear Model 

3451 samples
  57 predictors
   2 classes: &#39;nonspam&#39;, &#39;spam&#39; 

No pre-processing
Resampling: Bootstrapped (25 reps) 

Summary of sample sizes: 3451, 3451, 3451, 3451, 3451, 3451, ... 

Resampling results

  Accuracy  Kappa  Accuracy SD  Kappa SD
  0.9       0.8    0.007        0.01    


</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-7" style="background:;">
  <hgroup>
    <h2>SPAM Example: Final model</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="r">modelFit &lt;- train(type ~.,data=training, method=&quot;glm&quot;)
modelFit$finalModel
</code></pre>

<pre><code>
Call:  NULL

Coefficients:
      (Intercept)               make            address                all              num3d  
        -1.88e+00          -1.96e-01          -1.40e-01          -2.86e-02           4.54e+00  
              our               over             remove           internet              order  
         6.43e-01           1.00e+00           1.83e+00           4.06e-01           3.41e-01  
             mail            receive               will             people             report  
         9.91e-02          -5.66e-01          -1.56e-01          -1.97e-01           7.99e-02  
        addresses               free           business              email                you  
         2.60e+00           1.08e+00           7.90e-01           1.72e-01           6.29e-02  
           credit               your               font             num000              money  
         1.91e+00           2.60e-01           1.62e-01           2.03e+00           6.57e-01  
               hp                hpl             george             num650                lab  
        -1.86e+00          -6.87e-01          -6.25e+00           4.41e-01          -1.79e+00  
             labs             telnet             num857               data             num415  
        -5.07e-01          -6.57e+00           1.25e+00          -8.79e-01          -3.26e-01  
            num85         technology            num1999              parts                 pm  
        -2.85e+00           9.00e-01          -1.54e-01          -5.80e-01          -7.17e-01  
           direct                 cs            meeting           original            project  
         1.65e+00          -4.94e+01          -2.43e+00          -1.44e+00          -2.37e+00  
               re                edu              table         conference      charSemicolon  
        -6.74e-01          -1.50e+00          -3.09e+00          -2.69e+00          -1.40e+00  
 charRoundbracket  charSquarebracket    charExclamation         charDollar           charHash  
        -1.11e-01          -9.18e-01           9.84e-01           6.04e+00           3.06e+00  
       capitalAve        capitalLong       capitalTotal  
         7.58e-02           8.03e-03           9.53e-04  

Degrees of Freedom: 3450 Total (i.e. Null);  3393 Residual
Null Deviance:      4630 
Residual Deviance: 1290     AIC: 1410
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-8" style="background:;">
  <hgroup>
    <h2>SPAM Example: Prediction</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="r">predictions &lt;- predict(modelFit,newdata=testing)
predictions
</code></pre>

<pre><code>   [1] spam    spam    spam    spam    spam    spam    spam    nonspam spam    spam    nonspam
  [12] spam    spam    nonspam spam    spam    spam    spam    spam    spam    spam    spam   
  [23] spam    spam    nonspam spam    spam    spam    spam    nonspam nonspam spam    spam   
  [34] spam    spam    spam    spam    spam    spam    spam    spam    spam    spam    spam   
  [45] nonspam spam    spam    spam    spam    spam    spam    spam    spam    spam    spam   
  [56] spam    spam    spam    spam    spam    spam    spam    nonspam nonspam nonspam spam   
  [67] spam    spam    spam    spam    spam    spam    spam    spam    spam    spam    spam   
  [78] spam    spam    nonspam spam    spam    spam    spam    spam    spam    spam    nonspam
  [89] nonspam nonspam nonspam spam    spam    spam    spam    spam    spam    nonspam spam   
 [100] nonspam nonspam spam    spam    spam    spam    spam    spam    spam    spam    spam   
 [111] spam    spam    spam    spam    spam    spam    spam    spam    spam    spam    spam   
 [122] spam    spam    spam    nonspam nonspam spam    spam    spam    spam    spam    spam   
 [133] spam    spam    spam    spam    spam    spam    spam    spam    spam    spam    spam   
 [144] spam    spam    spam    spam    spam    spam    spam    spam    spam    spam    spam   
 [155] spam    spam    spam    spam    spam    spam    spam    spam    spam    spam    spam   
 [166] spam    spam    spam    spam    spam    spam    spam    spam    spam    spam    spam   
 [177] spam    spam    spam    spam    spam    spam    spam    nonspam spam    spam    spam   
 [188] spam    spam    spam    spam    spam    spam    spam    spam    spam    spam    nonspam
 [199] spam    spam    spam    spam    spam    spam    spam    spam    spam    nonspam nonspam
 [210] spam    spam    spam    spam    spam    spam    spam    spam    spam    spam    spam   
 [221] spam    spam    spam    spam    spam    spam    spam    nonspam spam    spam    spam   
 [232] spam    spam    spam    spam    spam    spam    spam    spam    spam    spam    spam   
 [243] spam    spam    spam    spam    spam    spam    spam    spam    spam    spam    spam   
 [254] spam    spam    spam    spam    nonspam nonspam spam    spam    spam    spam    spam   
 [265] spam    spam    spam    spam    spam    spam    spam    spam    spam    spam    spam   
 [276] spam    spam    spam    spam    spam    spam    spam    spam    nonspam spam    spam   
 [287] spam    spam    spam    spam    spam    spam    spam    spam    spam    spam    spam   
 [298] spam    spam    nonspam spam    spam    spam    spam    spam    spam    spam    spam   
 [309] spam    spam    spam    spam    spam    spam    spam    spam    spam    spam    spam   
 [320] spam    spam    spam    spam    spam    nonspam spam    nonspam spam    spam    spam   
 [331] spam    spam    nonspam spam    nonspam spam    spam    spam    spam    spam    spam   
 [342] spam    spam    spam    spam    nonspam spam    spam    spam    spam    spam    spam   
 [353] spam    spam    spam    spam    spam    spam    spam    spam    spam    nonspam spam   
 [364] spam    spam    spam    spam    spam    spam    spam    spam    spam    spam    spam   
 [375] spam    spam    spam    spam    nonspam nonspam spam    nonspam spam    spam    spam   
 [386] spam    spam    spam    spam    spam    spam    spam    nonspam spam    spam    spam   
 [397] spam    spam    nonspam spam    spam    spam    spam    spam    spam    spam    spam   
 [408] spam    spam    spam    nonspam nonspam spam    spam    spam    nonspam spam    spam   
 [419] spam    nonspam spam    spam    nonspam spam    spam    nonspam spam    nonspam spam   
 [430] spam    nonspam spam    spam    spam    spam    spam    spam    spam    nonspam spam   
 [441] spam    spam    spam    spam    spam    spam    spam    spam    spam    spam    spam   
 [452] spam    spam    spam    nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam
 [463] nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam
 [474] nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam
 [485] nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam
 [496] nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam
 [507] nonspam spam    nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam
 [518] nonspam nonspam nonspam nonspam nonspam spam    nonspam nonspam nonspam nonspam nonspam
 [529] nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam
 [540] nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam
 [551] nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam
 [562] nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam
 [573] nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam
 [584] nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam
 [595] nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam
 [606] nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam
 [617] nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam
 [628] nonspam nonspam nonspam spam    nonspam nonspam nonspam nonspam nonspam nonspam nonspam
 [639] nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam
 [650] nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam
 [661] nonspam nonspam nonspam spam    nonspam nonspam spam    nonspam nonspam nonspam nonspam
 [672] nonspam nonspam spam    nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam
 [683] nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam spam    nonspam
 [694] nonspam nonspam nonspam nonspam nonspam spam    nonspam nonspam nonspam nonspam nonspam
 [705] nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam
 [716] nonspam nonspam nonspam nonspam nonspam nonspam nonspam spam    nonspam nonspam nonspam
 [727] nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam
 [738] spam    nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam
 [749] nonspam nonspam nonspam nonspam nonspam nonspam spam    nonspam nonspam nonspam nonspam
 [760] nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam
 [771] nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam
 [782] nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam
 [793] nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam
 [804] nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam
 [815] nonspam spam    nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam
 [826] nonspam nonspam nonspam nonspam nonspam spam    nonspam nonspam spam    nonspam nonspam
 [837] nonspam nonspam nonspam nonspam nonspam spam    spam    spam    nonspam nonspam nonspam
 [848] nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam
 [859] spam    nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam
 [870] nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam
 [881] nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam
 [892] nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam
 [903] nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam
 [914] nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam
 [925] nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam
 [936] nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam
 [947] nonspam nonspam nonspam nonspam nonspam nonspam spam    nonspam nonspam nonspam nonspam
 [958] nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam
 [969] spam    nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam
 [980] nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam
 [991] nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam
[1002] nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam
[1013] nonspam spam    nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam
[1024] spam    nonspam nonspam spam    nonspam nonspam nonspam nonspam nonspam nonspam nonspam
[1035] nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam
[1046] nonspam nonspam nonspam nonspam spam    nonspam nonspam nonspam nonspam nonspam nonspam
[1057] nonspam nonspam nonspam nonspam nonspam spam    nonspam nonspam spam    nonspam nonspam
[1068] nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam spam   
[1079] nonspam nonspam nonspam nonspam spam    nonspam nonspam nonspam nonspam nonspam nonspam
[1090] nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam spam    spam    nonspam
[1101] spam    nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam
[1112] nonspam nonspam nonspam spam    nonspam nonspam nonspam nonspam nonspam nonspam nonspam
[1123] spam    spam    nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam
[1134] nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam nonspam
[1145] nonspam nonspam nonspam nonspam nonspam nonspam
Levels: nonspam spam
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-9" style="background:;">
  <hgroup>
    <h2>SPAM Example: Confusion Matrix</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="r">confusionMatrix(predictions,testing$type)
</code></pre>

<pre><code>Confusion Matrix and Statistics

          Reference
Prediction nonspam spam
   nonspam     662   49
   spam         35  404

               Accuracy : 0.927        
                 95% CI : (0.91, 0.941)
    No Information Rate : 0.606        
    P-Value [Acc &gt; NIR] : &lt;2e-16       

                  Kappa : 0.846        
 Mcnemar&#39;s Test P-Value : 0.156        

            Sensitivity : 0.950        
            Specificity : 0.892        
         Pos Pred Value : 0.931        
         Neg Pred Value : 0.920        
             Prevalence : 0.606        
         Detection Rate : 0.576        
   Detection Prevalence : 0.618        
      Balanced Accuracy : 0.921        

       &#39;Positive&#39; Class : nonspam      

</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-10" style="background:;">
  <hgroup>
    <h2>Further information</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li>Caret tutorials:

<ul>
<li><a href="http://www.edii.uclm.es/%7EuseR-2013/Tutorials/kuhn/user_caret_2up.pdf">http://www.edii.uclm.es/~useR-2013/Tutorials/kuhn/user_caret_2up.pdf</a></li>
<li><a href="http://cran.r-project.org/web/packages/caret/vignettes/caret.pdf">http://cran.r-project.org/web/packages/caret/vignettes/caret.pdf</a></li>
</ul></li>
<li>A paper introducing the caret package

<ul>
<li><a href="http://www.jstatsoft.org/v28/i05/paper">http://www.jstatsoft.org/v28/i05/paper</a></li>
</ul></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

    <slide class="backdrop"></slide>
  </slides>
  <div class="pagination pagination-small" id='io2012-ptoc' style="display:none;">
    <ul>
      <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=1 title='The caret R package'>
         1
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=2 title='Caret functionality'>
         2
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=3 title='Machine learning algorithms in R'>
         3
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=4 title='Why caret?'>
         4
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=5 title='SPAM Example: Data splitting'>
         5
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=6 title='SPAM Example: Fit a model'>
         6
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=7 title='SPAM Example: Final model'>
         7
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=8 title='SPAM Example: Prediction'>
         8
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=9 title='SPAM Example: Confusion Matrix'>
         9
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=10 title='Further information'>
         10
      </a>
    </li>
  </ul>
  </div>  <!--[if IE]>
    <script 
      src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js">  
    </script>
    <script>CFInstall.check({mode: 'overlay'});</script>
  <![endif]-->
</body>
  <!-- Load Javascripts for Widgets -->
  
  <!-- MathJax: Fall back to local if CDN offline but local image fonts are not supported (saves >100MB) -->
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        processEscapes: true
      }
    });
  </script>
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  <!-- <script src="https://c328740.ssl.cf1.rackcdn.com/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script> -->
  <script>window.MathJax || document.write('<script type="text/x-mathjax-config">MathJax.Hub.Config({"HTML-CSS":{imageFont:null}});<\/script><script src="../../librariesNew/widgets/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"><\/script>')
</script>
<!-- LOAD HIGHLIGHTER JS FILES -->
  <script src="../../librariesNew/highlighters/highlight.js/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <!-- DONE LOADING HIGHLIGHTER JS FILES -->
   
  </html>